{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d0ac4faf775ab40ee34a","webpack:///./src/placeholder-module.ts","webpack:///./src/placeholder-blot.ts"],"names":[],"mappings":"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","file":"placeholder-module.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"PlaceholderModule\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PlaceholderModule\"] = factory();\n\telse\n\t\troot[\"PlaceholderModule\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0ac4faf775ab40ee34a","import * as QuillTypes from 'quill'\nimport {default as ParchmentTypes} from 'parchment'\n\nimport getPlaceholderBlot from './placeholder-blot'\nimport {Placeholder} from './placeholder'\nimport {ModuleOptions} from './module-options'\n\nexport interface ModuleType {\n  new(quill: QuillTypes.Quill, options: ModuleOptions): any\n}\n\nexport default function getPlaceholderModule(Quill: QuillTypes.Quill, options?: {\n  className?: string\n}): ModuleType {\n  const Parchment: typeof ParchmentTypes = Quill.import('parchment')\n\n  const PlaceholderBlot = getPlaceholderBlot(Quill)\n  PlaceholderBlot.className = options && options.className || 'ql-placeholder-content'\n\n  Quill.register(PlaceholderBlot)\n\n  class PlaceholderModule {\n    private placeholders: Array<Placeholder>\n\n    constructor(private quill: QuillTypes.Quill, options: ModuleOptions) {\n      this.placeholders = options.placeholders\n      PlaceholderBlot.delimiters = options.delimiters || ['{', '}']\n\n      this.quill.getModule('toolbar').addHandler('placeholder', this.toolbarHandler)\n      this.quill.root.addEventListener('click', <EventListener>this.onClick)\n      this.quill.on('text-change', this.onTextChange)\n\n      ;(this.quill as any).insertPlaceholder = (placeholder:Placeholder) => {\n        const selection = this.quill.getSelection()\n\n        const index = selection ? selection.index : 0\n        const length = selection ? selection.length : 0\n        this.quill.deleteText(index, length)\n        this.quill.insertEmbed(index, 'placeholder', placeholder, Quill.sources.USER)\n        this.quill.setSelection(index + 1, 0)\n      }\n    }\n\n    onTextChange = (_: any, oldDelta: QuillTypes.DeltaStatic, source: QuillTypes.Sources) => {\n      if (source === Quill.sources.USER) {\n        const currrentContents = this.quill.getContents()\n        const delta = currrentContents.diff(oldDelta)\n\n        const shouldRevert = delta.ops.filter(op => op.insert &&\n          op.insert.placeholder && op.insert.placeholder.required).length\n\n        if (shouldRevert) {\n          this.quill.updateContents(delta, Quill.sources.SILENT)\n        }\n      }\n    }\n\n    onClick = (ev: QuillTypes.EditorEvent) => {\n      const blot = Parchment.find(ev.target.parentNode)\n\n      if (blot instanceof PlaceholderBlot) {\n        const index = this.quill.getIndex(blot)\n        this.quill.setSelection(index, blot.length(), Quill.sources.USER)\n      }\n    }\n\n    toolbarHandler = (identifier: string) => {\n      const selection = this.quill.getSelection()\n      const placeholder = this.placeholders.filter((pl: Placeholder) => pl.id === identifier)[0]\n      if (!placeholder) throw new Error(`Missing placeholder for ${identifier}`)\n\n      this.quill.deleteText(selection.index, selection.length)\n      this.quill.insertEmbed(selection.index, 'placeholder', placeholder, Quill.sources.USER)\n      this.quill.setSelection(selection.index + 1, 0)\n    }\n  }\n\n  return PlaceholderModule\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/placeholder-module.ts","import * as QuillTypes from 'quill'\nimport {default as ParchmentTypes} from 'parchment'\n\nimport {Placeholder} from './placeholder'\n\nexport default function getPlaceholderBlot(Quill: QuillTypes.Quill): any {\n  const Embed: typeof ParchmentTypes.Embed = Quill.import('blots/embed')\n\n  class PlaceholderBlot extends Embed {\n    static blotName = 'placeholder'\n    static tagName = 'span'\n    static className: string\n    static delimiters: Array<string>\n    public domNode: HTMLElement\n\n    static create(value: Placeholder) {\n      let node: HTMLElement = <HTMLElement>super.create(value)\n\n      if (value.required) node.setAttribute('data-required', 'true')\n      node.setAttribute('data-id', value.id)\n      node.setAttribute('data-label', value.label)\n      node.setAttribute('spellcheck', 'false')\n\n      const {delimiters} = PlaceholderBlot\n      const label = typeof delimiters === 'string' ?\n        `${delimiters}${value.label}${delimiters}` :\n        `${delimiters[0]}${value.label}${delimiters[1] || delimiters[0]}`\n\n      const labelNode = document.createTextNode(label)\n\n      if (Quill.version < '1.3') {\n        const wrapper = document.createElement('span')\n        wrapper.setAttribute('contenteditable', 'false')\n        wrapper.appendChild(labelNode)\n\n        node.appendChild(wrapper)\n      } else {\n        node.appendChild(labelNode)\n      }\n\n\n      return node\n    }\n\n    static value(domNode: HTMLElement): DOMStringMap {\n      return domNode.dataset\n    }\n\n    length(): number {\n      return 1\n    }\n\n    deleteAt(index: number, length: number): void {\n      if (!this.domNode.dataset.required)\n        super.deleteAt(index, length)\n    }\n  }\n\n  return PlaceholderBlot\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/placeholder-blot.ts"],"sourceRoot":""}